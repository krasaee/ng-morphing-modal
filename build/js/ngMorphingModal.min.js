var ngMorphingModal=angular.module("ngMorphingModal",[]);ngMorphingModal.directive("ngMorphingModal",function(){return{replace:!0,restrict:"AE",scope:{contentSelector:"@",selectorId:"@?",buttonOpenId:"@",buttonCloseId:"@",afterOpenFn:"&?",afterCloseFn:"&?"},link:function(n,e,i){var t=function(t){if(t.target.hasAttribute("close-id")){var o=e.find('[close-id="'+n.buttonCloseId+'"]');return n.closeModal(o),void(angular.isDefined(i.afterCloseFn)&&n.afterCloseFn(o))}if(t.target.hasAttribute("open-id")){var o=e.find('[open-id="'+n.buttonOpenId+'"]');return n.openModal(o),void(angular.isDefined(i.afterOpenFn)&&n.afterOpenFn(o))}console.log("Invalid callback, no open-id and or close-id defined for this morph modal",e,n)};e.bind("click",t)},templateUrl:function(n,e){return null!=e.templateUrl?e.templateUrl:"ng-morphing-modal.html"},controller:function(n){n.openModal=function(e){var i=n.retrieveScale(e.next(".cd-modal-bg"));e.addClass("to-circle"),e.next(".cd-modal-bg").addClass("is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){n.animateLayer(e.next(".cd-modal-bg"),i,!0)}),e.parents(".no-csstransitions").length>0&&n.animateLayer(e.next(".cd-modal-bg"),i,!0)},n.closeModal=function(){var e=$(".cd-section.modal-is-visible");e.removeClass("modal-is-visible").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){n.animateLayer(e.find(".cd-modal-bg"),1,!1)}),e.parents(".no-csstransitions").length>0&&n.animateLayer(e.find(".cd-modal-bg"),1,!1)},n.retrieveScale=function(n){if(n.offset()){var e=1;n.css("position","fixed").velocity({width:"100%",height:"100%",translateX:0},0)}else e=1;return e},n.scaleValue=function(n,e,i,t,o){var a=e>t/2?e:t-e,r=n>o/2?n:o-n;return Math.ceil(Math.sqrt(Math.pow(a,2)+Math.pow(r,2))/i)},n.animateLayer=function(e,i,t){e.velocity({scale:i},400,function(){$("body").toggleClass("overflow-hidden",t),t?e.parents(".cd-section").addClass("modal-is-visible").end().off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"):e.removeClass("is-visible").removeAttr("style").siblings(n.selectorId).removeClass("to-circle")})},n.updateLayer=function(){var n=$(".cd-section.modal-is-visible").find(".cd-modal-bg");n.velocity({scale:scale},0)}}}});